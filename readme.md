# 海粟云直播显示插件

     针对B站直播间做的OBS显示插件。

## 特性

- 本地离线部署，除了连接B站服务器以外几乎完全离线使用
- 基于JavaScript Node.js，暂时不依赖数据库与其他程序
- 绝大多数配置基于浏览器交互界面即可完成，简单易懂
- 一键重启核心、一键关闭核心
- 一键打开关注直播间
- 后台前端数据同步，可以使用首页的`测试连接`测试连接情况
- 核心日志与直播间日志静态保存，可以随时`查询/删除/修改/打包`。

## 当前版本

- **核心** 1.0
    - 基本功能完整。
- **加班组件** 1.0
    - 基本功能完整。
    - _OBS显示界面进行中_
      - 预计添加背景设置功能
- 更多内容等待添加

## 简单配置

`config.json`文件

```json
{
  "ServerPort": 10293,
  "BiliRoomID": 24492393,
  "HeartBeatDelaySecond": 45,
  "HeartBeatContent": "[object Object]",
  "WhiteIPList": [
    "::ffff:127.0.0.1",
    "::1"
  ]
}
```

**内容解析**

- `ServerPort` 核心占用的网络端口
- `BiliRoomID` B站直播间的ID
- `HeartBeatDelaySecond` 心跳包发送时间间隔（推荐不修改）
- `HeartBeatContent` 心跳包包内容（推荐不修改）
- `WhiteIPList` 可访问IP的白名单，仅有白名单中的ip能够访问核心（如非必要推荐不修改）

## 食用方法

1. 下载安装Node.js **开发者使用版本：16.16.0**
2. 下载代码zip包，解压在**非中文无空格**路径
3. 在项目路径打开cmd命令行安装项目依赖
    - 或者使用双击打开`npmInit.bat`等待窗口自动退出
4. 修改`config.json`中的内容完成基础配置
5. 双击`StartCore.bat`启动核心
    - 也可以将StartCore批处理文件加入到Windows计划任务来完成开机启动启动
6. 访问`http://本地回环地址：核心端口`打开核心配置
    - 默认地址使用`http://localhost:10293/`
7. 在主页面点击`切换信息流捕获`打开直播间信息流
    - 信息流状态显示`捕获中`代表后台已关注直播间信息流
    - 信息流状态显示`未在捕获中`代表后台暂未关注直播间信息流
    - 下播后记得将信息流捕获关闭，否则组件不知道下播，将会继续运行

## 组件说明书

- [加班组件](pluginDoc/加班插件.md)

## Q&A

- 启动核心之后浏览器无法通过端口访问到核心
    - 如果访问核心显示内容是：`NoResponse`
    - 请打开log文件夹中最新的log文件
    - 将最新访问的一个ip添加到`config.json`的IP白名单中
    - 重启核心