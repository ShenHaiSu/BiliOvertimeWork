"use strict";(self["webpackChunkbili_overtime_work_frontend"]=self["webpackChunkbili_overtime_work_frontend"]||[]).push([[745],{9745:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"OBSOvertimeWork"}},[e("div",{attrs:{id:"timeLeftShow"}},[e("h5",[t._v("加班时间")]),e("b",[t._v(t._s(t.timeFormat(t.currentWorkTime)))])]),e("div",{attrs:{id:"modItemList"}},[e("h5",[t._v("礼物列表")]),e("b-row",[t._l(t.modList,(function(r,a){return[e("b-col",{key:a+"key",staticClass:"",attrs:{cols:"4"}},[e("b-container",{staticClass:"modListDataShow",staticStyle:{position:"relative",padding:"0"}},[r.img?e("b-img-lazy",{staticClass:"modListDataImg",attrs:{src:r.img}}):e("span",[t._v(t._s(r.giftName))]),e("span",{staticClass:"modListItemCount"},[t._v(t._s(1!==r.count?"x"+r.count:""))])],1),e("p",{staticClass:"modListDataDesc"},[t._v(t._s(t.modTypeFormat(r)))])],1)]})),0===t.modList.length?[e("b-container",[e("br"),e("p",{staticStyle:{color:"white","font-size":"30px"}},[t._v("当前礼物列表为空")])])]:t._e()],2)],1)])},o=[],i=r(7008),s={name:"ViewOvertimeWork",data(){return{currentWorkTime:0,modList:[],tempGiftList:[]}},methods:{timeFormat(t){return i.Z.timeFormat(t)},modTypeFormat(t){let e="";switch(t.type){case"add":e=`+${this.timeFormat(t.timeChange)}`;break;case"reduce":e=`-${this.timeFormat(t.timeChange)}`;break;case"multi":e=`×${t.timeChange}`;break;case"division":e=`÷${t.timeChange}`;break;case"power":e=`${t.timeChange}次方`;break;case"clear":e="重置";break}return e},freshBackImage(){let t=document.getElementById("timeLeftShow"),e=document.getElementById("modItemList");t.style.backgroundImage="",e.style.backgroundImage="",t.style.backgroundImage=`url("http://${location.host}/API/overtimeWork/assets/background-top.png?${i.Z.getRandomString()}")`,e.style.backgroundImage=`url("http://${location.host}/API/overtimeWork/assets/background-bottom.png?${i.Z.getRandomString()}")`},async getBaseInfo(){let t=await i.Z.sendRequest.call(this,"/API/overtimeWork/getInfo");t.err||(this.currentWorkTime=t.data.currentWorkTime,this.modList=t.data.modList,this.tempGiftList=t.data.tempGiftList,this.$forceUpdate())}},mounted(){this.getBaseInfo(),this.$EventBus.$on("OvertimeWork-changeTime",(t=>{t=JSON.parse(t),this.currentWorkTime=t["timeLeft"]})),this.$EventBus.$on("OvertimeWork-changeModList",(t=>{t=JSON.parse(t),this.modList=t["data"]})),this.$EventBus.$on("OvertimeWork-freshPage",(()=>{this.$forceUpdate(),this.freshBackImage()})),setInterval((()=>{this.currentWorkTime<=0||!this.$store.state.liveStatus||this.currentWorkTime--}),1e3),this.freshBackImage()},computed:{}},n=s,m=r(1001),c=(0,m.Z)(n,a,o,!1,null,"1bcef209",null),h=c.exports},7008:function(t,e,r){var a=r(9669),o=r.n(a),i=r(289);const s="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM0123456789";function n(t,e="get",r){return o()({url:t,method:e,data:r}).then((t=>({err:!1,data:t.data}))).catch((t=>(i.C.call(this,"请求出现错误",t.message,"danger"),{err:!0})))}function m(t=0){let e="";return t>=31536e3&&(e+=Math.floor(t/31536e3)+"年 ",t-=31536e3*Math.floor(t/31536e3)),t>=86400&&(e+=Math.floor(t/86400)+"天 ",t-=86400*Math.floor(t/86400)),t>=3600&&(e+=Math.floor(t/3600)+"小时 ",t-=3600*Math.floor(t/3600)),t>=60&&(e+=Math.floor(t/60)+"分钟 ",t-=60*Math.floor(t/60)),e+=Math.floor(t)+"秒",e}function c(t="/"){return`http://${location.host}/#${"/"===t.slice(0,1)?"":"/"}${t}`}function h(t=10){let e="";for(let r=0;r<t;r++)e+=s[Math.floor(Math.random()*s.length+1)];return e}e["Z"]={sendRequest:n,timeFormat:m,getLocalCustomAddress:c,getRandomString:h}}}]);
//# sourceMappingURL=745.645dc004.js.map