(function(){"use strict";var t={289:function(t,e,n){function o(t="NoTitle",e="NoContent",n=""){this.$bvToast.toast(e,{title:t,variant:n,autoHideDelay:3e3})}n.d(e,{C:function(){return o}})},6049:function(t,e,n){n(6981),n(8394);var o=n(144),r=n(5069);n(7024);o["default"].use(r.ZPm);var a=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{id:"app",fluid:""}},[t.$route.meta["obsView"]?t._e():e("b-container",{staticClass:"container"},[e("hr"),e("b-nav",{attrs:{align:"left"}},[e("b-nav-item",[e("router-link",{attrs:{to:"/"}},[e("b-btn",{attrs:{variant:"primary"}},[t._v("首页")])],1)],1),e("b-dropdown",{staticClass:"m-md-2 m-xl-2 m-1",attrs:{id:"my-nav-dropdown",text:"组件",size:"sm",variant:"primary"}},[e("b-dropdown-text",{staticStyle:{width:"max-content"}},[t._v(" 点击组件名进入配置界面"),e("br"),e("b-badge",[t._v("(部分组件不能使用，可能代表将来会更新的组件)")])],1),e("b-dropdown-divider"),e("router-link",{attrs:{to:"/overtimeWork",tag:"b-dropdown-item"}},[t._v("加班插件")])],1),e("b-nav-item",[e("router-link",{attrs:{to:"/about"}},[e("b-btn",{attrs:{variant:"primary"}},[t._v("关于")])],1)],1)],1)],1),e("keep-alive",[t.$route.meta["alive"]?e("router-view"):t._e()],1),t.$route.meta["alive"]?t._e():e("router-view")],1)},i=[],s=n(9669),c=n.n(s),l={name:"App",created(){this.$WebSocket.webSocket=new WebSocket(`ws://${location.host}/WSLink`)},mounted(){c().defaults.timeout=3e3,this.$WebSocket.webSocket.onerror=()=>{console.log("WebSocket通道出现错误。将自动关闭通道。"),this.$WebSocket.webSocket.close()},this.$WebSocket.webSocket.onclose=()=>{console.log("WebSocket通道已经关闭。")},this.$WebSocket.webSocket.onmessage=t=>{let e=JSON.parse(t.data);return"StreamStart"===e.type?this.$store.commit("setLiveStatus",!0):"StreamEnd"===e.type?this.$store.commit("setLiveStatus",!1):"liveStreamStatus"===e.type?this.$store.commit("setLiveStatus",e["status"]):void this.$EventBus.$emit(e.type?e.type:"message",t.data)}}},u=l,d=n(1001),f=(0,d.Z)(u,a,i,!1,null,null,null),b=f.exports,v=n(8345),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("MainPage")],1)},h=[],p=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:"",id:"content"}},[e("hr"),e("div",{staticStyle:{"background-color":"rgba(255,255,255,0.3)"}},[e("h1",[t._v("海粟云 B站直播 显示插件")]),e("b-overlay",{attrs:{show:t.overlayStatus,rounded:"sm"}},[e("b-container",[e("hr"),e("b-row",{staticClass:"justify-content-md-center"},[e("b-col",[e("b-btn",{on:{click:t.sendTest}},[t._v("测试连接")])],1),e("b-col",[e("b-btn",{on:{click:t.toggleLiveStatus}},[t._v("切换信息流捕获")])],1),e("b-col",[e("b-btn",{on:{click:function(e){return t.coreHandle("restart")}}},[t._v("重启插件核心")])],1),e("b-col",[e("b-btn",{on:{click:function(e){return t.coreHandle("exit")}}},[t._v("退出插件核心")])],1)],1),e("hr"),e("b-row",{staticClass:"justify-content-md-center mainData"},[e("b-col",{attrs:{cols:"3"}},[e("span",[t._v("直播间地址")])]),e("b-col",{attrs:{cols:"7"}},[e("b-form-input",{attrs:{disabled:"",value:t.liveRoomURL}})],1),e("b-col",{attrs:{cols:"2"}},[e("b-btn",{on:{click:function(e){return t.copyClick("liveRoomAddress")}}},[t._v("复制")]),t._v("  "),e("b-btn",{on:{click:t.openNewTabs}},[t._v("打开")])],1)],1),e("b-row",{staticClass:"justify-content-md-center mainData"},[e("b-col",{attrs:{cols:"3"}},[e("span",[t._v("信息流状态")])]),e("b-col",{attrs:{cols:"7"}},[e("b-form-input",{attrs:{disabled:"",value:t.getLiveStatus}})],1),e("b-col",{attrs:{cols:"2"}},[e("b-btn",{on:{click:function(e){return t.copyClick("liveStatus")}}},[t._v("复制")])],1)],1),e("b-row",{staticClass:"justify-content-md-center mainData"},[e("b-col",{attrs:{cols:"3"}},[e("span",[t._v("心跳包间隔")])]),e("b-col",{attrs:{cols:"7"}},[e("b-form-input",{attrs:{disabled:"",value:t.getHeartBeatDelay}})],1),e("b-col",{attrs:{cols:"2"}},[e("b-btn",{on:{click:function(e){return t.copyClick("HeartBeatDelay")}}},[t._v("复制")])],1)],1),e("b-row",{staticClass:"justify-content-md-center mainData"},[e("b-col",{attrs:{cols:"3"}},[e("span",[t._v("心跳包内容")])]),e("b-col",{attrs:{cols:"7"}},[e("b-form-input",{attrs:{disabled:"",value:t.getHeartBeatContent}})],1),e("b-col",{attrs:{cols:"2"}},[e("b-btn",{on:{click:function(e){return t.copyClick("HeartBeatContent")}}},[t._v("复制")])],1)],1)],1)],1)],1)])},y=[],g=n(8175),k=n.n(g),S=n(289),w={name:"MainPage",data(){return{baseInfo:{BiliRoomID:null,HeartBeatDelaySecond:null,HeartBeatContent:null,liveInformation:{status:!1}},overlayStatus:!1}},methods:{async toggleLiveStatus(){let t=await this.sendReq("/API/statusToggle");if(t.err)return;let e=`${t.data["message"]} \n当前状态是：${t.data["liveStatus"]}`;S.C.call(this,"发送成功",e,"success"),this.baseInfo.liveInformation.status=t.data["liveStatus"],this.$forceUpdate()},async sendTest(){let t=await this.sendReq("/test:payload?query=key");t.err||S.C.call(this,"请求成功，测试通过",JSON.stringify(t["data"]),"success")},async getCoreInfo(){let t=await this.sendReq("/API/coreInfo");t.err||(this.baseInfo={...t.data})},coreHandle(t="restart"){"restart"===t?this.sendReq("/restartCore").then():"exit"===t&&this.sendReq("/exitCore").then(),this.overlayStatus=!0,setTimeout((()=>{location.reload()}),1e3)},copyClick(t){let e="";switch(t){case"liveRoomAddress":e=this.liveRoomURL;break;case"liveStatus":e=this.$store.state.liveStatus?"信息流捕获进行中····":"信息流捕获暂停";break;case"HeartBeatDelay":e=this.getHeartBeatDelay;break;case"HeartBeatContent":e=JSON.stringify(this.getHeartBeatContent);break;default:e="Null"}k().copy(e),S.C.call(this,"完成复制",e,"success")},openNewTabs(){open(this.liveRoomURL)},sendReq(t,e="get"){return c()({url:t,method:e}).then((t=>({err:!1,data:t.data}))).catch((t=>(S.C.call(this,"请求错误",t.message,"danger"),{err:!0,object:t})))}},async mounted(){this.getCoreInfo().then()},computed:{liveRoomURL(){return this.baseInfo.BiliRoomID?`https://live.bilibili.com/${this.baseInfo.BiliRoomID}`:"Null"},getHeartBeatDelay(){return this.baseInfo.HeartBeatDelaySecond?`${this.baseInfo.HeartBeatDelaySecond} 秒`:"Null"},getHeartBeatContent(){return this.baseInfo.HeartBeatContent?this.baseInfo.HeartBeatContent:"Null"},getLiveStatus(){return this.$store.state.liveStatus?"捕获中···":"未在捕获中···"}}},C=w,_=(0,d.Z)(C,p,y,!1,null,"6236a2ec",null),B=_.exports,$={name:"HomeView",components:{MainPage:B}},H=$,I=(0,d.Z)(H,m,h,!1,null,null,null),O=I.exports;o["default"].use(v.ZP);const R=[{path:"/",name:"首页",component:O},{path:"/about",name:"关于",component:()=>n.e(164).then(n.bind(n,4164))},{path:"/overtimeWork",name:"加班插件配置",meta:{alive:!0},component:()=>n.e(565).then(n.bind(n,5565))},{path:"/OBSView",name:"OBS显示界面",meta:{obsView:!0},component:()=>n.e(543).then(n.bind(n,3543)),children:[{path:"overtimeWork",name:"加班显示界面",meta:{obsView:!0},component:()=>n.e(700).then(n.bind(n,5700))}]}],j=new v.ZP({routes:R});j.afterEach((t=>{console.log(t),document.title="海粟云直播插件 - "+t.name}));var D=j,L=n(629);o["default"].use(L.ZP);var N=new L.ZP.Store({state:{liveStatus:!1},getters:{},mutations:{setLiveStatus(t,e){t.liveStatus=e}},actions:{},modules:{}}),T=n(3017),P={webSocket:{}};o["default"].config.productionTip=!1,o["default"].prototype.$WebSocket=P,o["default"].prototype.$EventBus=new o["default"],o["default"].use(r.XG7),o["default"].use(T.A7),new o["default"]({router:D,store:N,render:function(t){return t(b)}}).$mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,a){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],a=t[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{164:"940d848e",543:"dd7e8e16",565:"0bcc528e",700:"2c57fba8"}[t]+".js"}}(),function(){n.miniCssF=function(t){return"css/"+t+"."+{164:"bf3e3cb6",565:"8f0c6483",700:"19d6b380"}[t]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="bili-overtime-work-frontend:";n.l=function(o,r,a,i){if(t[o])t[o].push(r);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=o),t[o]=[r];var f=function(e,n){s.onerror=s.onload=null,clearTimeout(b);var r=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(t){return t(n)})),e)return e(n)},b=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t=function(t,e,n,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var a=function(a){if(r.onerror=r.onload=null,"load"===a.type)n();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,r.parentNode.removeChild(r),o(c)}};return r.onerror=r.onload=a,r.href=e,document.head.appendChild(r),r},e=function(t,e){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===t||a===e))return r}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){r=i[o],a=r.getAttribute("data-href");if(a===t||a===e)return r}},o=function(o){return new Promise((function(r,a){var i=n.miniCssF(o),s=n.p+i;if(e(i,s))return r();t(o,s,r,a)}))},r={143:0};n.f.miniCss=function(t,e){var n={164:1,565:1,700:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=o(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}(),function(){var t={143:0};n.f.j=function(e,o){var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise((function(n,o){r=t[e]=[n,o]}));o.push(r[2]=a);var i=n.p+n.u(e),s=new Error,c=function(o){if(n.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}};n.l(i,c,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var u=c(n)}for(e&&e(o);l<i.length;l++)a=i[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},o=self["webpackChunkbili_overtime_work_frontend"]=self["webpackChunkbili_overtime_work_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6049)}));o=n.O(o)})();
//# sourceMappingURL=app.c7d8071b.js.map