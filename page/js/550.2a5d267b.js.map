{"version":3,"file":"js/550.2a5d267b.js","mappings":"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","sources":["webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue?028b","webpack://bili-overtime-work-frontend/./src/common/ToolsFunctions.js","webpack://bili-overtime-work-frontend/src/components/ViewOvertimeWork.vue","webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue?951a","webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"OBSOvertimeWork\"}},[_c('div',{attrs:{\"id\":\"timeLeftShow\"}},[_c('h5',[_vm._v(\"加班时间\")]),_c('span',[_vm._v(_vm._s(_vm.timeFormat(_vm.currentWorkTime)))])]),_c('div',{attrs:{\"id\":\"modItemList\"}},[_c('h5',[_vm._v(\"礼物列表\")]),_c('b-row',[_vm._l((_vm.modList),function(item,index){return [_c('b-col',{key:index+'key',staticClass:\"\",attrs:{\"cols\":\"4\"}},[_c('b-container',{staticClass:\"modListDataShow\",staticStyle:{\"position\":\"relative\",\"padding\":\"0\"}},[(item.img)?_c('b-img-lazy',{staticClass:\"modListDataImg\",attrs:{\"src\":item.img}}):_c('span',[_vm._v(_vm._s(item.giftName))]),_c('span',{staticClass:\"modListItemCount\"},[_vm._v(_vm._s(item.count !== 1 ? \"x\" + item.count : \"\"))])],1),_c('p',{staticClass:\"modListDataDesc\"},[_vm._v(_vm._s(_vm.modTypeFormat(item)))])],1)]}),(_vm.modList.length === 0)?[_c('b-container',[_c('br'),_c('p',{staticStyle:{\"color\":\"white\",\"font-size\":\"30px\"}},[_vm._v(\"当前礼物列表为空\")])])]:_vm._e()],2)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\";\r\nimport {showToast} from \"@/common/ToastShow\";\r\n\r\n/**\r\n *\r\n * @param url {String} 访问的地址\r\n * @param method {String} 访问的方法\r\n * @return {Promise<{err: boolean, data: *} | {err: boolean}>}\r\n */\r\nfunction sendRequest(url, method = \"get\") {\r\n  return axios({\r\n    url, method\r\n  }).then(axiosRes => {\r\n    return {err: false, data: axiosRes.data};\r\n  }).catch(axiosErr => {\r\n    showToast.call(this, \"请求出现错误\", axiosErr.message, \"danger\");\r\n    return {err: true};\r\n  })\r\n}\r\n\r\nexport default {sendRequest};","<template>\r\n  <div id=\"OBSOvertimeWork\">\r\n    <div id=\"timeLeftShow\">\r\n      <h5>加班时间</h5>\r\n      <span>{{ timeFormat(currentWorkTime) }}</span>\r\n    </div>\r\n    <div id=\"modItemList\">\r\n      <h5>礼物列表</h5>\r\n      <b-row>\r\n        <template v-for=\"(item,index) in modList\">\r\n          <b-col :key=\"index+'key'\" cols=\"4\" class=\"   \">\r\n            <b-container class=\"modListDataShow\" style=\"position: relative; padding: 0\">\r\n              <b-img-lazy v-if=\"item.img\" :src=\"item.img\" class=\"modListDataImg\"/>\r\n              <span v-else>{{ item.giftName }}</span>\r\n              <span class=\"modListItemCount\">{{ item.count !== 1 ? \"x\" + item.count : \"\" }}</span>\r\n            </b-container>\r\n            <p class=\"modListDataDesc\">{{ modTypeFormat(item) }}</p>\r\n          </b-col>\r\n        </template>\r\n        <template v-if=\"modList.length === 0\">\r\n          <b-container>\r\n            <br>\r\n            <p style=\"color: white;font-size: 30px\">当前礼物列表为空</p>\r\n          </b-container>\r\n        </template>\r\n      </b-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Tools from \"@/common/ToolsFunctions\";\r\n\r\nexport default {\r\n  name: \"ViewOvertimeWork\",\r\n  data() {\r\n    return {\r\n      currentWorkTime: 0,\r\n      modList: [],\r\n      tempGiftList: [],\r\n    }\r\n  },\r\n  methods: {\r\n    timeFormat(input) {\r\n      let output = ``;\r\n      if (input >= 86400) {\r\n        output += Math.floor(input / 86400) + \"天 \";\r\n        input -= Math.floor(input / 86400) * 86400;\r\n      }\r\n      if (input >= 3600) {\r\n        output += Math.floor(input / 3600) + \"小时 \";\r\n        input -= Math.floor(input / 3600) * 3600;\r\n      }\r\n      if (input >= 60) {\r\n        output += Math.floor(input / 60) + \"分钟 \";\r\n        input -= Math.floor(input / 60) * 60;\r\n      }\r\n      output += Math.floor(input) + \"秒\";\r\n      return output;\r\n    },\r\n    modTypeFormat(input) {\r\n      let output = \"\";\r\n      switch (input.type) {\r\n        case \"add\":\r\n          output = `加班时间 增加${this.timeFormat(input.timeChange)}`;\r\n          break;\r\n        case \"reduce\":\r\n          output = `加班时间 减少${this.timeFormat(input.timeChange)}`;\r\n          break;\r\n        case \"multi\":\r\n          output = `加班时间 乘以${input.timeChange}`;\r\n          break;\r\n        case \"division\":\r\n          output = `加班时间 除以${input.timeChange}`;\r\n          break;\r\n        case \"power\":\r\n          output = `剩余时间 ${input.timeChange}次方`;\r\n          break;\r\n      }\r\n      return output;\r\n    },\r\n    async getBaseInfo() {\r\n      let result = await Tools.sendRequest.call(this, \"/API/overtimeWork/getInfo\");\r\n      if (result.err) return;\r\n      this.currentWorkTime = result.data.currentWorkTime;\r\n      this.modList = result.data.modList;\r\n      this.tempGiftList = result.data.tempGiftList;\r\n      this.$forceUpdate();\r\n    }\r\n  },\r\n  mounted() {\r\n    // 获取基础信息\r\n    this.getBaseInfo();\r\n    // 关注剩余时间变动\r\n    this.$EventBus.$on(\"OvertimeWork-changeTime\", data => {\r\n      data = JSON.parse(data);\r\n      this.currentWorkTime = data['timeLeft'];\r\n    });\r\n    // 关注加班道具列表变动\r\n    this.$EventBus.$on(\"OvertimeWork-changeModList\", data => {\r\n      data = JSON.parse(data);\r\n      this.modList = data['data'];\r\n    });\r\n    // 自动降低时长\r\n    setInterval(() => {\r\n      if (this.currentWorkTime <= 0 || !this.$store.state.liveStatus) return;\r\n      this.currentWorkTime--;\r\n    }, 1000);\r\n  },\r\n  computed: {},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#OBSOvertimeWork * {\r\n  font-family: \"Microsoft YaHei UI\", sans-serif;\r\n}\r\n\r\n#timeLeftShow,\r\n#modItemList {\r\n  padding: 10px 5px 10px 5px;\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  text-align: center;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  border-radius: 20px;\r\n}\r\n\r\n#timeLeftShow > h5,\r\n#modItemList > h5 {\r\n  color: white;\r\n}\r\n\r\n#timeLeftShow > span {\r\n  font-size: 23px;\r\n  color: white;\r\n}\r\n\r\n.modList > div {\r\n  color: white;\r\n  font-size: 14px;\r\n}\r\n\r\n.modListData {\r\n  text-align: center;\r\n  color: white;\r\n}\r\n\r\n.modListDataImg {\r\n  height: 100%;\r\n}\r\n\r\n.modListDataShow {\r\n  overflow: hidden;\r\n  height: 50px;\r\n  width: 50px;\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n  border-radius: 10%;\r\n}\r\n\r\n.modListDataShow > span {\r\n  font-family: \"Microsoft YaHei UI\", sans-serif;\r\n}\r\n\r\n.modListItemCount {\r\n  font-weight: bold;\r\n  color: rgba(0, 0, 0, 0.8);\r\n  z-index: 999;\r\n  position: absolute;\r\n  top: 27px;\r\n  right: 0;\r\n  border-radius: 2px;\r\n}\r\n\r\n.modListDataDesc {\r\n  font-size: 13px;\r\n  color: white;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewOvertimeWork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewOvertimeWork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewOvertimeWork.vue?vue&type=template&id=3b6c1d10&scoped=true&\"\nimport script from \"./ViewOvertimeWork.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewOvertimeWork.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewOvertimeWork.vue?vue&type=style&index=0&id=3b6c1d10&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b6c1d10\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","_v","_s","timeFormat","currentWorkTime","_l","item","index","key","staticClass","staticStyle","img","giftName","count","modTypeFormat","modList","length","_e","staticRenderFns","sendRequest","url","method","then","axiosRes","err","data","catch","axiosErr","message","name","tempGiftList","methods","input","output","Math","floor","type","timeChange","async","result","$forceUpdate","mounted","getBaseInfo","$EventBus","$on","JSON","parse","setInterval","$store","state","liveStatus","computed","component"],"sourceRoot":""}