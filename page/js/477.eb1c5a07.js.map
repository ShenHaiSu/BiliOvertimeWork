{"version":3,"file":"js/477.eb1c5a07.js","mappings":"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","sources":["webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue?1df1","webpack://bili-overtime-work-frontend/./src/common/ToolsFunctions.js","webpack://bili-overtime-work-frontend/src/components/ViewOvertimeWork.vue","webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue?951a","webpack://bili-overtime-work-frontend/./src/components/ViewOvertimeWork.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"OBSOvertimeWork\"}},[_c('div',{attrs:{\"id\":\"timeLeftShow\"}},[_c('h5',[_vm._v(\"加班时间\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"timeFormat\")(_vm.currentWorkTime)))])]),_c('div',{attrs:{\"id\":\"modItemList\"}},[_c('h5',[_vm._v(\"礼物列表\")]),_vm._l((_vm.modList),function(item,index){return [_c('b-row',{key:index + '-key',staticClass:\"modList\"},[_c('b-col',{staticClass:\"modListLeft\",attrs:{\"cols\":\"4\"}},[_vm._v(_vm._s(item.giftName))]),_c('b-col',{staticClass:\"modListCenter\",attrs:{\"cols\":\"1\"}},[_vm._v(_vm._s(item.count !== 1 ? \"x\" + item.count : \"\"))]),_c('b-col',{staticClass:\"modListRight\",attrs:{\"cols\":\"7\"}},[_vm._v(_vm._s(_vm._f(\"modTypeFormat\")(item)))])],1)]})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\";\r\nimport {showToast} from \"@/common/ToastShow\";\r\n\r\n/**\r\n *\r\n * @param url {String} 访问的地址\r\n * @param method {String} 访问的方法\r\n * @return {Promise<{err: boolean, data: *} | {err: boolean}>}\r\n */\r\nfunction sendRequest(url, method = \"get\") {\r\n  return axios({\r\n    url, method\r\n  }).then(axiosRes => {\r\n    return {err: false, data: axiosRes.data};\r\n  }).catch(axiosErr => {\r\n    showToast.call(this, \"请求出现错误\", axiosErr.message, \"danger\");\r\n    return {err: true};\r\n  })\r\n}\r\n\r\nexport default {sendRequest};","<template>\r\n  <div id=\"OBSOvertimeWork\">\r\n    <div id=\"timeLeftShow\">\r\n      <h5>加班时间</h5>\r\n      <span>{{ currentWorkTime | timeFormat }}</span>\r\n    </div>\r\n    <div id=\"modItemList\">\r\n      <h5>礼物列表</h5>\r\n      <template v-for=\"(item,index) in modList\">\r\n        <b-row :key=\"index + '-key'\" class=\"modList\">\r\n          <b-col cols=\"4\" class=\"modListLeft\">{{ item.giftName }}</b-col>\r\n          <b-col cols=\"1\" class=\"modListCenter\">{{ item.count !== 1 ? \"x\" + item.count : \"\" }}</b-col>\r\n          <b-col cols=\"7\" class=\"modListRight\">{{ item | modTypeFormat }}</b-col>\r\n        </b-row>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Tools from \"@/common/ToolsFunctions\";\r\n\r\nexport default {\r\n  name: \"ViewOvertimeWork\",\r\n  data() {\r\n    return {\r\n      currentWorkTime: 7213211531,\r\n      modList: [],\r\n      tempGiftList: [],\r\n    }\r\n  },\r\n  methods: {\r\n    async getBaseInfo() {\r\n      let result = await Tools.sendRequest.call(this, \"/API/overtimeWork/getInfo\");\r\n      if (result.err) return;\r\n      this.currentWorkTime = result.data.currentWorkTime;\r\n      this.modList = result.data.modList;\r\n      this.tempGiftList = result.data.tempGiftList;\r\n      this.$forceUpdate();\r\n    }\r\n  },\r\n  mounted() {\r\n    // 获取基础信息\r\n    this.getBaseInfo();\r\n    // 关注剩余时间变动\r\n    this.$EventBus.$on(\"OvertimeWork-changeTime\", data => {\r\n      data = JSON.parse(data);\r\n      this.currentWorkTime = data['timeLeft'];\r\n    });\r\n    // 关注加班道具列表变动\r\n    this.$EventBus.$on(\"OvertimeWork-changeModList\", data => {\r\n      data = JSON.parse(data);\r\n      this.modList = data['data'];\r\n    });\r\n    // 自动降低时长\r\n    setInterval(() => {\r\n      if (this.currentWorkTime <= 0 || !this.$store.state.liveStatus) return;\r\n      this.currentWorkTime--;\r\n    }, 1000);\r\n  },\r\n  computed: {},\r\n  filters: {\r\n    timeFormat(input) {\r\n      let output = ``;\r\n      output += Math.floor(input / 86400) + \"天 \";\r\n      input -= Math.floor(input / 86400) * 86400;\r\n      output += Math.floor(input / 3600) + \"小时 \";\r\n      input -= Math.floor(input / 3600) * 3600;\r\n      output += Math.floor(input / 60) + \"分钟 \";\r\n      input -= Math.floor(input / 60) * 60;\r\n      output += Math.floor(input) + \"秒\";\r\n      return output;\r\n    },\r\n    modTypeFormat(input) {\r\n      let output = \"\";\r\n      switch (input.type) {\r\n        case \"add\":\r\n          output = `增加${input.timeChange}秒`;\r\n          break;\r\n        case \"reduce\":\r\n          output = `减少${input.timeChange}秒`;\r\n          break;\r\n        case \"multi\":\r\n          output = `乘以${input.timeChange}`;\r\n          break;\r\n        case \"division\":\r\n          output = `除以${input.timeChange}`;\r\n          break;\r\n        case \"power\":\r\n          output = `剩余时间的${input.timeChange}次方`;\r\n          break;\r\n      }\r\n      return output;\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#OBSOvertimeWork * {\r\n  font-family: \"Microsoft YaHei UI\", sans-serif;\r\n}\r\n\r\n#timeLeftShow,\r\n#modItemList {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  text-align: center;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  border-radius: 20px;\r\n}\r\n\r\n#timeLeftShow > h5,\r\n#modItemList > h5 {\r\n  color: white;\r\n}\r\n\r\n#timeLeftShow > span {\r\n  font-size: 23px;\r\n  color: white;\r\n}\r\n\r\n.modList > div {\r\n  color: white;\r\n  font-size: 14px;\r\n}\r\n\r\n.modListRight {\r\n  text-align: left;\r\n}\r\n\r\n.modListCenter {\r\n  text-align: left;\r\n}\r\n\r\n.modListLeft {\r\n  text-align: right;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewOvertimeWork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewOvertimeWork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewOvertimeWork.vue?vue&type=template&id=03e02b38&scoped=true&\"\nimport script from \"./ViewOvertimeWork.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewOvertimeWork.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewOvertimeWork.vue?vue&type=style&index=0&id=03e02b38&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03e02b38\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","_v","_s","_f","currentWorkTime","_l","item","index","key","staticClass","giftName","count","staticRenderFns","sendRequest","url","method","then","axiosRes","err","data","catch","axiosErr","message","name","modList","tempGiftList","methods","async","result","$forceUpdate","mounted","getBaseInfo","$EventBus","$on","JSON","parse","setInterval","$store","state","liveStatus","computed","filters","timeFormat","input","output","Math","floor","modTypeFormat","type","timeChange","component"],"sourceRoot":""}