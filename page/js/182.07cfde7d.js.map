{"version":3,"file":"js/182.07cfde7d.js","mappings":"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","sources":["webpack://bili-overtime-work-frontend/./src/views/OvertimeWorkConfig.vue?4d4e","webpack://bili-overtime-work-frontend/src/views/OvertimeWorkConfig.vue","webpack://bili-overtime-work-frontend/./src/views/OvertimeWorkConfig.vue?6d37","webpack://bili-overtime-work-frontend/./src/views/OvertimeWorkConfig.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-container',{attrs:{\"fluid\":\"\",\"id\":\"OutContainer\"}},[_c('hr'),_c('b-container',[_c('h1',[_c('b',[_vm._v(\"加班组件\")]),_c('small',[_c('b-badge',[_vm._v(\"v0.1 配置面板\")])],1)]),_c('hr'),_c('b-row',[_c('b-col',[_c('b-btn',{on:{\"click\":_vm.getBaseInfo}},[_vm._v(\"刷新面板信息\")])],1),_c('b-col',[_c('b-btn',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.openOBSView}},[_vm._v(\"打开OBS显示窗口\")])],1),_c('b-col',[_c('b-btn',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.copyOBSViewAddress}},[_vm._v(\"复制OBS显示窗口网址\")])],1),_c('b-col',[_c('b-btn',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.resetTimeLeft}},[_vm._v(\"重置剩余加班时间\")])],1)],1),_c('hr'),_c('h3',[_vm._v(\"基础信息\")]),_c('br'),_c('b-row',[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('span',{staticClass:\"baseText\"},[_vm._v(\"默认加班时间\")])]),_c('b-col',{attrs:{\"cols\":\"10\"}},[_c('span',{staticClass:\"baseText\"},[_vm._v(_vm._s(_vm._f(\"timeFormat\")(this.defaultWorkTime)))])])],1),_c('b-row',[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('span',{staticClass:\"baseText\"},[_vm._v(\"当前剩余加班时间\")])]),_c('b-col',{attrs:{\"cols\":\"10\"}},[_c('span',{staticClass:\"baseText\"},[_vm._v(_vm._s(_vm._f(\"timeFormat\")(this.currentWorkTime)))])])],1),_c('br'),_c('br'),_c('hr'),_c('h3',[_vm._v(\"快捷操作\")]),_c('br'),_c('b-row',[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('span',{staticClass:\"baseText\"},[_vm._v(\"修改量\")])]),_c('b-col',{attrs:{\"cols\":\"8\"}},[_c('b-input',{attrs:{\"placeholder\":\"填入需要修改加班时间的量，正数增加，负数减少。(单位：秒)\",\"type\":\"number\"},model:{value:(_vm.fastModCount),callback:function ($$v) {_vm.fastModCount=$$v},expression:\"fastModCount\"}})],1),_c('b-col',[_c('b-btn',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.fastModTime}},[_vm._v(\"提交更改\")])],1)],1),_c('br'),_c('br'),_c('hr'),_c('h3',[_vm._v(\"礼物修改时间列表\")]),_c('br'),_c('b-row',[_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('如果有两笔数据的礼物名相同，那么序号较小的优先触发，序号较大的将不会触发。'),expression:\"'如果有两笔数据的礼物名相同，那么序号较小的优先触发，序号较大的将不会触发。'\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"1\",\"title\":\"配置的序号\"}},[_vm._v(\"序号 \")]),_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('只允许填入字符串。需要和真实礼物名完全一一对应。'),expression:\"'只允许填入字符串。需要和真实礼物名完全一一对应。'\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"2\",\"title\":\"触发的礼物名\"}},[_vm._v(\"礼物名 \")]),_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('允许的类型仅有五个，分别是增加、减少、乘以、除以和N次方。'),expression:\"'允许的类型仅有五个，分别是增加、减少、乘以、除以和N次方。'\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"2\",\"title\":\"触发事件的类型\"}},[_vm._v(\"类型 \")]),_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('指时间变动触发事件所需要的礼物数量，如果低于这个数量，仅会将数据累加，直到超过阈值。'),expression:\"'指时间变动触发事件所需要的礼物数量，如果低于这个数量，仅会将数据累加，直到超过阈值。'\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"2\",\"title\":\"触发事件的阈值\"}},[_vm._v(\"阈值 \")]),_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('必须填入大于0的整数。如果触发类型是N次方，那么次数变化量代表次方数。例如2代表平方。'),expression:\"'必须填入大于0的整数。如果触发类型是N次方，那么次数变化量代表次方数。例如2代表平方。'\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"4\",\"title\":\"触发事件后加班时间的变化量\"}},[_vm._v(\"变化量 \")]),_c('b-col',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover.bottom\",value:('点击按钮对指定行的数据进行操作，如果需要重置可以点击界面上方的 刷新面板信息 '),expression:\"'点击按钮对指定行的数据进行操作，如果需要重置可以点击界面上方的 刷新面板信息 '\",modifiers:{\"hover\":true,\"bottom\":true}}],attrs:{\"cols\":\"1\",\"title\":\"对单笔数据进行操作\"}},[_vm._v(\"操作 \")])],1),_c('br'),(_vm.modList.length === 0)?[_c('b-badge',[_vm._v(\"列表为空\")]),_c('br')]:_vm._e(),_vm._l((_vm.modList),function(item,index){return [_c('b-row',{key:index + 'no',staticClass:\"DataRow\"},[_c('b-col',{attrs:{\"cols\":\"1\"}},[_vm._v(_vm._s(index + 1))]),_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('b-input',{model:{value:(item.giftName),callback:function ($$v) {_vm.$set(item, \"giftName\", $$v)},expression:\"item.giftName\"}})],1),_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('b-select',{attrs:{\"options\":_vm.modOptionsList},model:{value:(item.type),callback:function ($$v) {_vm.$set(item, \"type\", $$v)},expression:\"item.type\"}})],1),_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", _vm._n($$v))},expression:\"item.count\"}})],1),_c('b-col',{attrs:{\"cols\":\"4\"}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(item.timeChange),callback:function ($$v) {_vm.$set(item, \"timeChange\", _vm._n($$v))},expression:\"item.timeChange\"}})],1),_c('b-col',{attrs:{\"cols\":\"1\"}},[_c('b-btn',{attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.deleteItem(index)}}},[_vm._v(\"删除\")])],1)],1)]}),_c('br'),_c('b-row',[_c('b-col',[_c('b-btn',{staticStyle:{\"width\":\"50%\"},on:{\"click\":_vm.addNewModItem}},[_vm._v(\"新增一笔数据\")])],1),_c('b-col',[_c('b-btn',{staticStyle:{\"width\":\"50%\"},attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.uploadModList}},[_vm._v(\"上传列表\")])],1),_c('b-col',[_c('b-btn',{staticStyle:{\"width\":\"50%\"},attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.getBaseInfo}},[_vm._v(\"重置列表\")])],1)],1)],2),_c('br'),_c('br'),_c('br'),_c('br'),_c('br')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-container fluid id=\"OutContainer\">\r\n    <hr>\r\n    <b-container>\r\n      <h1>\r\n        <b>加班组件</b>\r\n        <small>\r\n          <b-badge>v0.1 配置面板</b-badge>\r\n        </small>\r\n      </h1>\r\n      <hr>\r\n      <b-row>\r\n        <b-col>\r\n          <b-btn @click=\"getBaseInfo\">刷新面板信息</b-btn>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn @click=\"openOBSView\" variant=\"primary\">打开OBS显示窗口</b-btn>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn @click=\"copyOBSViewAddress\" variant=\"primary\">复制OBS显示窗口网址</b-btn>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn @click=\"resetTimeLeft\" variant=\"danger\">重置剩余加班时间</b-btn>\r\n        </b-col>\r\n      </b-row>\r\n      <hr>\r\n      <h3>基础信息</h3>\r\n      <br>\r\n      <b-row>\r\n        <b-col cols=\"2\">\r\n          <span class=\"baseText\">默认加班时间</span>\r\n        </b-col>\r\n        <b-col cols=\"10\">\r\n          <span class=\"baseText\">{{ this.defaultWorkTime | timeFormat }}</span>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col cols=\"2\">\r\n          <span class=\"baseText\">当前剩余加班时间</span>\r\n        </b-col>\r\n        <b-col cols=\"10\">\r\n          <span class=\"baseText\">{{ this.currentWorkTime | timeFormat }}</span>\r\n        </b-col>\r\n      </b-row>\r\n      <br><br>\r\n      <hr>\r\n      <h3>快捷操作</h3>\r\n      <br>\r\n      <b-row>\r\n        <b-col cols=\"2\">\r\n          <span class=\"baseText\">修改量</span>\r\n        </b-col>\r\n        <b-col cols=\"8\">\r\n          <b-input v-model=\"fastModCount\" placeholder=\"填入需要修改加班时间的量，正数增加，负数减少。(单位：秒)\" type=\"number\"></b-input>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn @click=\"fastModTime\" variant=\"primary\">提交更改</b-btn>\r\n        </b-col>\r\n      </b-row>\r\n      <br><br>\r\n      <hr>\r\n      <h3>礼物修改时间列表</h3>\r\n      <br>\r\n      <b-row>\r\n        <b-col cols=\"1\"\r\n               v-b-popover.hover.bottom=\"'如果有两笔数据的礼物名相同，那么序号较小的优先触发，序号较大的将不会触发。'\"\r\n               title=\"配置的序号\">序号\r\n        </b-col>\r\n        <b-col cols=\"2\"\r\n               v-b-popover.hover.bottom=\"'只允许填入字符串。需要和真实礼物名完全一一对应。'\"\r\n               title=\"触发的礼物名\">礼物名\r\n        </b-col>\r\n        <b-col cols=\"2\"\r\n               v-b-popover.hover.bottom=\"'允许的类型仅有五个，分别是增加、减少、乘以、除以和N次方。'\"\r\n               title=\"触发事件的类型\">类型\r\n        </b-col>\r\n        <b-col cols=\"2\"\r\n               v-b-popover.hover.bottom=\"'指时间变动触发事件所需要的礼物数量，如果低于这个数量，仅会将数据累加，直到超过阈值。'\"\r\n               title=\"触发事件的阈值\">阈值\r\n        </b-col>\r\n        <b-col cols=\"4\"\r\n               v-b-popover.hover.bottom=\"'必须填入大于0的整数。如果触发类型是N次方，那么次数变化量代表次方数。例如2代表平方。'\"\r\n               title=\"触发事件后加班时间的变化量\">变化量\r\n        </b-col>\r\n        <b-col cols=\"1\"\r\n               v-b-popover.hover.bottom=\"'点击按钮对指定行的数据进行操作，如果需要重置可以点击界面上方的 刷新面板信息 '\"\r\n               title=\"对单笔数据进行操作\">操作\r\n        </b-col>\r\n      </b-row>\r\n      <br>\r\n      <template v-if=\"modList.length === 0\">\r\n        <b-badge>列表为空</b-badge>\r\n        <br>\r\n      </template>\r\n      <template v-for=\"(item,index) in modList\">\r\n        <b-row :key=\"index + 'no'\" class=\"DataRow\">\r\n          <b-col cols=\"1\">{{ index + 1 }}</b-col>\r\n          <b-col cols=\"2\">\r\n            <b-input v-model=\"item.giftName\"></b-input>\r\n          </b-col>\r\n          <b-col cols=\"2\">\r\n            <b-select v-model=\"item.type\" :options=\"modOptionsList\"/>\r\n          </b-col>\r\n          <b-col cols=\"2\">\r\n            <b-input v-model.number=\"item.count\" type=\"number\"></b-input>\r\n          </b-col>\r\n          <b-col cols=\"4\">\r\n            <b-input v-model.number=\"item.timeChange\" type=\"number\"></b-input>\r\n          </b-col>\r\n          <b-col cols=\"1\">\r\n            <b-btn @click=\"deleteItem(index)\" variant=\"danger\">删除</b-btn>\r\n          </b-col>\r\n        </b-row>\r\n      </template>\r\n      <br>\r\n      <b-row>\r\n        <b-col>\r\n          <b-btn style=\"width: 50%\" @click=\"addNewModItem\">新增一笔数据</b-btn>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn style=\"width: 50%\" @click=\"uploadModList\" variant=\"primary\">上传列表</b-btn>\r\n        </b-col>\r\n        <b-col>\r\n          <b-btn style=\"width: 50%\" @click=\"getBaseInfo\" variant=\"danger\">重置列表</b-btn>\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n    <br><br><br><br><br>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {showToast} from \"@/common/ToastShow\";\r\nimport clipboard from \"clipboard\";\r\n\r\nexport default {\r\n  name: \"OvertimeWorkConfig\",\r\n  data() {\r\n    return {\r\n      defaultWorkTime: 7200,\r\n      currentWorkTime: 200,\r\n      modList: [],\r\n      tempGiftList: [],\r\n      fastModCount: null,\r\n      modOptionsList: [\r\n        {value: \"add\", text: \"增加\"},\r\n        {value: \"reduce\", text: \"减少\"},\r\n        {value: \"multi\", text: \"乘以\"},\r\n        {value: \"division\", text: \"除以\"},\r\n        {value: \"power\", text: \"N次方\"},\r\n      ],\r\n      OBSViewAddress: \"/OBSView/overtimeWork\"\r\n    }\r\n  },\r\n  methods: {\r\n    async resetTimeLeft() {\r\n      if (!window.confirm(\"确定要将当前剩余加班时间删除，并设置为默认加班时间吗？\")) return;\r\n      let result = await this.sendRequest(\"/API/overtimeWork/resetTime\", \"post\");\r\n      if (result.err) return;\r\n      showToast.call(this, \"重置时间成功\", \"已经将剩余加班时间重置为默认时间。\", \"success\");\r\n      this.getBaseInfo().then();\r\n    },\r\n    async getBaseInfo() {\r\n      let result = await this.sendRequest(\"/API/overtimeWork/getInfo\", \"get\");\r\n      if (result.err) return;\r\n      this.defaultWorkTime = result.data.defaultWorkTime;\r\n      this.currentWorkTime = result.data.currentWorkTime;\r\n      this.modList = result.data.modList;\r\n      this.tempGiftList = result.data.tempGiftList;\r\n      this.$forceUpdate();\r\n    },\r\n    async fastModTime() {\r\n      // 验证数据合法性\r\n      if (!this.fastModCount)\r\n        return showToast.call(this, \"参数不符合要求\", \"快捷操作量必须是正负整数。\", \"danger\");\r\n      // 发送上报请求\r\n      let result = await this.sendRequest(\r\n          \"/API/overtimeWork/fastMod\",\r\n          \"post\",\r\n          {modCount: parseInt(this.fastModCount)}\r\n      );\r\n      if (result.err) return;\r\n      showToast.call(this, \"快捷操作修改完毕。\", \"操作修改完毕，如果剩余加班时间没有变动，请尝试点击刷新信息按钮。\", \"success\");\r\n      this.getBaseInfo().then();\r\n    },\r\n    async uploadModList() {\r\n      if (!window.confirm(\"请确认数据是否合规，上传后核心将会自动删除不合规的数据。并不保留不合规数据。\")) return;\r\n      let result = await this.sendRequest(\"/API/overtimeWork/updateModList\", \"post\", this.modList);\r\n      if (result.err) return;\r\n      showToast.call(this, \"上传数据已完成\", \"如果列表没有刷新，可以点击 '重置列表' 获取当前最新可用的列表\", \"success\");\r\n    },\r\n    openOBSView() {\r\n      open(\"http://\" + location.host + \"/#\" + this.OBSViewAddress);\r\n    },\r\n    copyOBSViewAddress() {\r\n      clipboard.copy(\"http://\" + location.host + \"/#\" + this.OBSViewAddress);\r\n      showToast.call(this,\"内容已复制\",\"http://\" + location.host + \"/#\" + this.OBSViewAddress,\"success\");\r\n    },\r\n    deleteItem(index) {\r\n      // console.log(`index:${index}`);\r\n      // console.log(this.modList[index]);\r\n      this.modList.splice(index, 1);\r\n    },\r\n    addNewModItem() {\r\n      this.modList.push({\r\n        giftName: \"空白\",\r\n        count: 0,\r\n        timeChange: 0,\r\n        type: \"add\"\r\n      })\r\n    },\r\n    testData() {\r\n      console.log(this.modList);\r\n    },\r\n    sendRequest(url, method = \"get\", data = {}) {\r\n      return axios({\r\n        url, method, data\r\n      }).then(axiosRes => {\r\n        return {err: false, data: axiosRes.data};\r\n      }).catch(axiosErr => {\r\n        showToast.call(this, \"请求失败\", axiosErr.message, \"danger\");\r\n        return {err: true};\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getBaseInfo();\r\n    setInterval(() => {\r\n      // 自动减少剩余时间\r\n      if (this.currentWorkTime <= 0 || !this.$store.state.liveStatus) return;\r\n      this.currentWorkTime--;\r\n    }, 1000);\r\n\r\n    // 关注剩余加班时间变动事件\r\n    this.$EventBus.$on(\"OvertimeWork-changeTime\", data => {\r\n      data = JSON.parse(data);\r\n      this.currentWorkTime = data['timeLeft'];\r\n    });\r\n\r\n    // 关注加班道具列表变动事件\r\n    this.$EventBus.$on(\"OvertimeWork-changeModList\", data => {\r\n      data = JSON.parse(data);\r\n      this.modList = data['data'];\r\n    });\r\n  },\r\n  filters: {\r\n    timeFormat(input) {\r\n      // 输入： 123456789\r\n      // 输出： N天 N小时 N分钟 N秒\r\n      // 一小时 3600\r\n      // 一分钟 60\r\n      let output = ``;\r\n      output += Math.floor(input / 86400) + \"天 \";\r\n      input -= Math.floor(input / 86400) * 86400;\r\n      output += Math.floor(input / 3600) + \"小时 \";\r\n      input -= Math.floor(input / 3600) * 3600;\r\n      output += Math.floor(input / 60) + \"分钟 \";\r\n      input -= Math.floor(input / 60) * 60;\r\n      output += Math.floor(input) + \"秒\";\r\n      return output;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#OutContainer {\r\n  text-align: center;\r\n}\r\n\r\n.baseText {\r\n  line-height: 38px;\r\n}\r\n\r\n.DataRow {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.DataRow > div {\r\n  line-height: 38px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OvertimeWorkConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OvertimeWorkConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OvertimeWorkConfig.vue?vue&type=template&id=068f583a&scoped=true&\"\nimport script from \"./OvertimeWorkConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./OvertimeWorkConfig.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OvertimeWorkConfig.vue?vue&type=style&index=0&id=068f583a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"068f583a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","_v","on","getBaseInfo","openOBSView","copyOBSViewAddress","resetTimeLeft","staticClass","_s","_f","defaultWorkTime","currentWorkTime","model","value","callback","$$v","fastModCount","expression","fastModTime","directives","name","rawName","modifiers","modList","length","_e","_l","item","index","key","$set","modOptionsList","_n","$event","deleteItem","staticStyle","addNewModItem","uploadModList","staticRenderFns","data","tempGiftList","text","OBSViewAddress","methods","async","window","confirm","result","sendRequest","err","then","$forceUpdate","modCount","parseInt","open","location","host","splice","push","giftName","count","timeChange","type","testData","console","log","url","method","axiosRes","catch","axiosErr","message","mounted","setInterval","$store","state","liveStatus","$EventBus","$on","JSON","parse","filters","timeFormat","input","output","Math","floor","component"],"sourceRoot":""}